<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <title>Create a Quiz</title>
    <link rel="stylesheet" type="text/css" href="/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Recursive:wght@600&display=swap" rel="stylesheet">
<!--    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">-->
</head>

<body>

    <div class="container main">

        <form th:action="@{/create}" th:object="${quiz}" method="post">

<!-- Title textarea -->
            <div class="flex-column">
                <label>Title</label>
                <textarea type="text" class="form-control" th:field="*{title}" rows="1"></textarea>
                <div class="error" th:if="${#fields.hasErrors('title')}" th:errors="*{title}">Error</div>
            </div>

<!-- Question textarea -->
            <div class="flex-column">
                <label>Question</label>
                <textarea type="text" class="form-control" th:field="*{text}" rows="2"></textarea>
                <div class="error" th:if="${#fields.hasErrors('text')}" th:errors="*{text}">Error</div>
            </div>

<!-- Multiple choice radio buttons -->
            <div class="form-row">
                <strong>Does the question have more than one answer?</strong>
            </div>

            <div class="col-md-6">
                <div class="form-row">
                    <input type="radio" th:field="*{isMultipleChoice}" id="option1" value="true">
                    <label for="option1">More than one answer</label>
                </div>
                <div class="form-row">
                    <input type="radio" th:field="*{isMultipleChoice}" id="option2" value="false">
                    <label for="option2">A single answer</label>
                </div>
            </div>

<!-- Options -->
            <div class="form-row">
                <strong>Options</strong>
            </div>

            <div class="flex-column">
                <div class="flex" th:each="option, rowStat : *{options}">
                    <p th:text="${rowStat.index + 1}"></p>
                    <input type="text" th:field="*{options[__${rowStat.index}__].option}">
                    <ul th:if="${#fields.hasErrors('*{options[__${rowStat.index}__].option}')}">
                        <li
                            class="error"
                            th:each="err : ${#fields.errors('*{options[__${rowStat.index}__].option}')}"
                            th:text="${err}">
                            Input is incorrect
                        </li>
                    </ul>
                </div>

                <div class="error" th:if="${#fields.hasErrors('options')}" th:text="${#fields.errors('options')}"></div>

                <button type="submit" name="addOption">Add option</button>
            </div>

<!-- Answers -->
            <div class="form-row">
                <strong>Answers</strong>
            </div>

            <div class="flex-column">
                <div th:each="answer, rowStat : *{answers}">
                    <input type="text" th:field="*{answers[__${rowStat.index}__].answer}">
                    <ul th:if="${#fields.hasErrors('*{answers[__${rowStat.index}__].answer}')}">
                        <li
                            class="error"
                            th:each="err : ${#fields.errors('*{answers[__${rowStat.index}__].answer}')}"
                            th:text="${err}">
                            Input is incorrect
                        </li>
                    </ul>
                </div>

                <div class="error" th:if="${#fields.hasErrors('answers')}" th:text="${#fields.errors('answers')}"></div>

                <button type="submit" name="addAnswer">Add answer</button>
            </div>

<!-- Submit form -->
            <div class="center">
                <a th:href="@{/}">
                    <button type="submit" name="save">Save Quiz</button>
                </a>
            </div>

        </form>

    </div>

    <div class="center">
        <a th:href="@{/}">
            <button>Home</button>
        </a>
    </div>

</body>

</html>