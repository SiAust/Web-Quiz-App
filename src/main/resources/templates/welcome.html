<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5" lang="en">

<head>
    <title>Welcome to Quiz API</title>
    <link rel="stylesheet" type="text/css" href="/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Recursive:wght@600&display=swap" rel="stylesheet">
</head>

<body>

    <div class="container main">

        <span id="title"><p>Welcome <span sec:authentication="name"></span>!</p></span>

        <p>Welcome to the great big Tottenham Hotspur Quiz!
        If you're already registered please go play a quiz!
        Otherwise register yourself below.
        COYS!</p>


        <div class="options-container">

            <div sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_USER')" class="option">
                <b>Play Quiz</b><a th:href="@{/play}">Play</a>
            </div>

            <div sec:authorize="!isAuthenticated()" class="option">
                <b>Register</b><a th:href="@{/register}">Register</a>
            </div>

            <div sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')" class="option">
                <b>Create new question</b><a th:href="@{/create}">Create</a>
            </div>

            <div sec:authorize="hasRole('ROLE_ADMIN')" class="option">
                <b>Show all quizzes</b><a th:href="@{/quiz}">All quizzes</a>
            </div>

            <div sec:authorize="hasRole('ROLE_ADMIN')" class="option">
                <b>Show all users</b><a th:href="@{/users}">All users</a>
            </div>

        </div>

    </div>

    <!-- Temp user menu -->
    <div class="container main">

        <strong>User menu</strong>

        <div>
            <div><strong>User: </strong><span sec:authentication="name"></span></div>

            <strong>Roles: </strong><span sec:authentication="authorities"></span>

            <div class="flex-column">
                <form sec:authorize="!isAuthenticated()" action="#" th:action="@{/login}" method="get">
                    <button type="submit">Login</button>
                </form>

                <form sec:authorize="isAuthenticated()" action="#" th:action="@{/logout}" method="get">
                    <button type="submit">Logout</button>
                </form>
            </div>

        </div>

    </div>

    <!-- "Buy me a coffee" button -->
    <div class="center">
        <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js"
                data-name="bmc-button" data-slug="simonaust" data-color="#FFDD00"
                data-emoji="" data-font="Cookie" data-text="Buy me a coffee"
                data-outline-color="#000000" data-font-color="#000000"
                data-coffee-color="#ffffff">
        </script>
    </div>

</body>